define("bui/extensions/treepicker",["bui/common","jquery","bui/picker","bui/overlay","bui/list","bui/data","bui/tree"],function(e,t,r){var i=e("bui/common"),l=e("bui/picker").ListPicker,n=(e("bui/tree"),l.extend({setSelectedValue:function(e){e=e||"";var t=this,r=t.get("tree");if(t.get("isInit")||t._initControl(),"selected"===t.get("selectStatus"))e&&r.expandNode(e),l.prototype.setSelectedValue.call(t,e);else{r.clearAllChecked();var n=e.split(",");i.each(n,function(e){r.setChecked(e)})}},getSelectedValue:function(){var e=this,t=e.get("tree");if("selected"===e.get("selectStatus"))return l.prototype.getSelectedValue.call(e);var r=t.getCheckedNodes();return r=e._getFilterNodes(r),i.Array.map(r,function(e){return e.id}).join(",")},getSelectedText:function(){var e=this,t=e.get("tree");if("selected"===e.get("selectStatus"))return l.prototype.getSelectedText.call(e);var r=t.getCheckedNodes();return r=e._getFilterNodes(r),i.Array.map(r,function(e){return e.text}).join(",")},_getFilterNodes:function(e){var t=this,r=t.get("filter");return r&&(e=i.Array.filter(e,r)),e}},{ATTRS:{defaultChildClass:{value:"tree-list"},selectStatus:{value:"selected"},changeEvent:{getter:function(){return this.get("selectStatus")+"change"}},hideEvent:{getter:function(e){return"checked"===this.get("selectStatus")?null:e}},filter:{},tree:{getter:function(){return this.get("children")[0]}}}},{xclass:"tree-picker"}));r.exports=n});